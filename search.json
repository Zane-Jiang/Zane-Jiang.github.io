[{"title":"OSDI'25 Tiered Memory Management Beyond Hotness","path":"/2025/07/08/è®ºæ–‡é˜…è¯»/OSDI-25-Tiered-Memory-Management-Beyond-Hotness/","content":"Tiered Memory Management Beyond Hotness Jinshu Liu Hamid Hadian Hanchen Xu Huaicheng Li Virginia Tech https://github.com/MoatLab/SoarAlto/ Virginia è¿™ä¸ªMoatLabå¯¹CXLå†…å­˜çš„ç ”ç©¶å¾ˆæ·±å…¥ï¼Œä¹‹å‰çš„Pond(ASPLOS `23)ã€Melodyï¼ˆASPLOS`25ï¼‰éƒ½å‡ºè‡ªè¿™ä¸ªå®éªŒå®¤ 1.IntroductionHot data is not always performance-critical and can reside in the slow-tier without degrading performance . Latency mitigation techniques, such as memory-level parallelism (MLP), obscure the true cost of memory accesses 1.å…ˆå‰çš„å·¥ä½œé€šè¿‡å¯å‘å¼æˆ–è€…å†…å­˜è®¿é—®æˆæœ¬é—´æ¥çš„ååº”MLPçš„å½±å“ï¼Œä½†æ˜¯ä»ç„¶ç¼ºå°‘å‡†ç¡®çš„MLPå»ºæ¨¡å’ŒæŒ‡æ ‡ã€‚ 2.ç°æœ‰çš„å†…å­˜åˆ†å±‚æ–¹æ³•å…·æœ‰éš¾ä»¥è½»é‡åŒ–å’Œä¸å‡†ç¡®çš„ç‰¹ç‚¹ã€‚å°¤å…¶æ˜¯ä¸€å¼€å§‹å…ˆæ”¾ç½®æœ¬åœ°å†…å­˜çš„æ–¹æ³•æœ¬èº«å°±æ˜¯æ¬¡ä¼˜çš„ï¼Œå¹¶ä¸”æ¿€è¿›çš„è¿ç§»ç­–ç•¥ä¼šå¯¼è‡´è¿‡åˆ†çš„è¿ç§»ã€‚ æ‰€ä»¥ä½œè€…å°±å®šä¹‰äº†ä¸€ä¸ªMLPå½±å“çš„æŒ‡æ ‡ï¼ŒAOLï¼Œå¹¶ä¸”ç”¨æ¥è¾…åŠ©æ”¾ç½®å†³ç­–å’Œè¿ç§»å†³ç­–ã€‚ Propose Amortized Offcore Latency (AOL), a novel performance metric that accurately quantifies the performance impact of memory accesses by integrating memory latency and MLP. æ”¾ç½®å†³ç­–ç­–ç•¥SOARåŸºäºAOLè¿›è¡Œæ’åºï¼Œç„¶åä»¥æ­¤å†³å®šæ”¾ç½®ã€‚ALTOä¾é AOLæ¥è¿›è¡Œé¡µé¢æå‡çš„è¿‡æ»¤ï¼Œå¯ä»¥ä¸TPPç­‰ç­–ç•¥è¿›è¡Œç»“åˆã€‚ 2.Background and MotivationMLPåæ˜ ç­‰å¾…å†…å­˜æ§åˆ¶å™¨å®ç°çš„å†…å­˜è¯·æ±‚æ•°é‡ã€‚ high-MLP access patternsï¼š array traversalsã€‚ low MLPï¼špointer-chasing with depedent requests æŠŠä¸¤ä¸ªç±»å‹çš„è®¿å­˜ä¸€èµ·è·‘ï¼Œç„¶åä¸åŒçš„åˆ†å±‚ç­–ç•¥ä¾ç…§ä¸åŒçš„ç­–ç•¥è·‘äº†æµ‹æ€§èƒ½ï¼Œå‘ç°æŠŠæ•°ç»„è®¿é—®çš„æ”¾åˆ°å¿«é€Ÿå±‚ï¼Œåè€Œä¼šä½¿æ€§èƒ½é™ä½ã€‚ 3.Memory Performance PredictionRelating Slow-tier Performance to CPU Stallsç¦»çº¿åˆ†æ Performance degradation on the slow-tier is predominantly caused by increased CPU stalls due to LLC misses, which we refer to as LLC-Stalls å¼ºè°ƒåŒºåˆ†LLC-misså’ŒLLC-Stall æ…¢é€Ÿå±‚å•æ¬¡missé€ æˆçš„å»¶è¿Ÿæ›´é•¿ï¼Œå‡è®¾ç›¸åŒçš„miss,æ…¢é€Ÿå±‚ä¹Ÿä¼šæœ‰æ›´é•¿çš„LLS-Stall. è®ºæ–‡ä¸­è®²åˆ°åŸºäºLLC-Stallæ¥é¢„æµ‹å‡é€Ÿçš„è¯¯å·®ä½äº4%ï¼Œå¼€æºä»¥åå¯ä»¥é¢„æµ‹ä¸€ä¸‹åŸºäºLLC-Missçš„ï¼ˆè€ƒè™‘é¢„å–å™¨çš„å½±å“ï¼‰ã€‚ LLC-Stalls for Performance Predictionåœ¨çº¿é¢„æµ‹ å‘ç°å¿«é€Ÿå±‚å‘ç”ŸCPUStallçš„åœ¨æ…¢é€Ÿå±‚ä¹Ÿä¼šå‘ç”Ÿã€‚ æ‰€ä»¥ç”¨P&#x3D; SLLC&#x2F;cæ¥é¢„æµ‹æ…¢é€Ÿå±‚çš„å‡é€Ÿã€‚ AOL for Accurate Predictionè¿›ä¸€æ­¥ç ”ç©¶å‘ç°ï¼ŒPåœ¨ä½MLPçš„åœºæ™¯ä¸‹å‡†ç¡®ï¼Œä½†æ˜¯åœ¨é«˜MLPçš„åœºæ™¯ä¸‹å¹¶ä¸å‡†ç¡®ã€ä¸»è¦æ˜¯å¿½ç•¥äº†MLPçš„å½±å“ï¼Œé«˜MLPä¼šå‡å°‘é•¿å»¶è¿Ÿçš„å½±å“ã€‚ éšç€å»¶è¿Ÿçš„å¢åŠ ï¼ŒMLPçš„å»¶è¿Ÿæ©ç›–å—ç›Šä¼šé™ä½ã€‚ å› æ­¤å®šä¹‰äº†AOLï¼š æŒ‡æ ‡ äº‹ä»¶ å«ä¹‰ ğ‘ ğ¿ğ¿ğ¶ CYCLE ACTIVITY.STALLS L3 MISS L3 Missæ—¶å¯¼è‡´çš„Stall c CPU_CLK_UNHALTED.THREAD éHaltä¸‹çš„æ—¶é’Ÿå‘¨æœŸæ•° A1 OFFCORE_REQUESTS_OUTSTANDING.CYCLES_WITH_DATA_RD L2 Miss åã€è¯·æ±‚å®Œæˆå‰ï¼Œè¿™äº›å†…å­˜è¯»å–è¯·æ±‚åœ¨ SQ ä¸­ç­‰å¾…çš„å‘¨æœŸæ•°æ¢è¨€ä¹‹ï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸæ£€æŸ¥æ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªloadè¯·æ±‚ï¼Œæœ‰å°±åŠ 1 A2 OFFCORE_REQUESTS_OUTSTANDING.DEMAND_DATA_RD L2 miss åï¼Œæ¯ä¸ªå‘¨æœŸæœ‰å¤šå°‘ä¸ªæœªå®Œæˆçš„ Demand Load è¯·æ±‚åœ¨SQä¸­ç­‰å¾…ï¼Œå³ï¼šè¯·æ±‚å †ç§¯çš„æ·±åº¦&#x2F;å‹åŠ›ã€‚ A3 OFFCORE REQUESTS.DEMAND DATA RD L2 miss åï¼Œè¢«å‘å¾€ uncore çš„ load è¯·æ±‚çš„æ¬¡æ•°ã€‚ å»¶è¿Ÿè®¡ç®—è¿ç”¨åˆ°äº†æ’é˜Ÿè®ºä¸­çš„Little`sæ³•åˆ™:å¹³å‡åœ¨ç³»ç»Ÿä¸­çš„é¡¹æ•° L = åˆ°è¾¾ç‡ Î» Ã— å¹³å‡å“åº”æ—¶é—´ W ç»“åˆäº‹ä»¶ï¼š L &#x3D; æŸä¸ªæ—¶é—´æ®µå†…ï¼Œåœ¨ uncore æ­£åœ¨ç­‰å¾…å®Œæˆçš„è¯·æ±‚æ•°ï¼ˆå•ä½ï¼šä¸ªï¼‰ï¼Œå³ â€œæ¯å‘¨æœŸ outstanding çš„è¯·æ±‚æ•°â€ Î» &#x3D; è¯·æ±‚åˆ°è¾¾é€Ÿç‡ï¼ˆå•ä½ï¼šè¯·æ±‚&#x2F;å‘¨æœŸï¼‰â‰ˆ æ€»è¯·æ±‚æ•° &#x2F; æ€»å‘¨æœŸæ•° W &#x3D; æ¯ä¸ªè¯·æ±‚åœ¨ç³»ç»Ÿä¸­åœç•™çš„æ—¶é—´ï¼ˆå•ä½ï¼šå‘¨æœŸï¼‰â†’ å¹³å‡å»¶è¿Ÿ W = L / Î» = å¹³å‡ outstanding è¯·æ±‚æ•° / åˆ°è¾¾é€Ÿç‡ æ ¹æ®æ’é˜Ÿç†è®ºï¼Œè®¡ç®—å¾—1ã€‚ MLPæ˜¯å¹³å‡æ¯ä¸ªå‘¨æœŸå†…å¤šå°‘ä¸ªinflightå†…å­˜è¯·æ±‚ï¼Œè¡¡é‡å†…å­˜è®¿é—®çš„å¹¶è¡Œåº¦ã€‚ A2ä»£è¡¨æ€»çš„å †ç§¯è¯·æ±‚æ•°ï¼Œæ€»çš„å †ç§¯è¯·æ±‚æ•°ï¼ˆA2ï¼‰é™¤ä»¥æ€»çš„å †ç§¯å‘¨æœŸæ•°ï¼ˆA1),å¾—åˆ°æ¯ä¸ªå‘¨æœŸçš„å¹³å‡inflightè¯·æ±‚æ•°ã€‚ 1ã€2ä»£å…¥çš„AOLã€‚ å»¶è¿Ÿé™¤ä»¥å¹¶è¡Œè¯·æ±‚ï¼Œå¾—åˆ°äº†ä¸€ä¸ªå¹¶è¡Œè¯·æ±‚ä¸‹å•ä¸ªè¯·æ±‚çš„å»¶è¿Ÿå½±å“ã€‚ ç„¶åä½œè€…å®šä¹‰äº†å‡é€Ÿæ¨¡å‹ï¼šS&#x3D; P x K. k &#x3D; f(AOL)çš„å‡½æ•°æ˜¯ç”¨S&#x2F;Pä¸AOLè¿›è¡Œåˆ†æï¼Œåå‘å‘ˆç°å‡ºç‰¹å®šçš„æ¸è¿›åŒæ›²çº¿ï¼Œåæ¨å‡ºäº†å…¶æ•°å­¦æ¨¡å‹ã€‚ å…³äºaå’Œbï¼Œä¸ç¡¬ä»¶ç›¸å…³è€Œä¸å·¥ä½œè´Ÿè½½æ— å…³çš„å¸¸æ•°ï¼Œä¸¤ä¸ªç‰¹å®šçš„åœºæ™¯ï¼ˆæŒ‡é’ˆè¿½è¸ªã€æ•°ç»„è®¿é—®ï¼‰èƒ½å¤Ÿæ¨å‡ºï¼ˆä¼°è®¡å¾…å®šç³»æ•°æ³•ï¼‰ åˆ†æï¼š AOLå¢åŠ æ—¶ï¼ˆMLPå‡å°æˆ–è€…Latencyå¢å¤§ï¼‰ï¼ŒKè¶‹è¿‘åˆ°ä¸Šç•Œ1ï¼ŒSæ¥è¿‘P,é¢„æµ‹ç”±LLC.stall&#x2F;cå†³å®šã€‚ç›¸åï¼ˆMLPå¢å¤§æˆ–è€…Latencyå‡å°‘ï¼‰ï¼ŒKè¶‹è¿‘ä¸‹ç•Œ0ï¼ŒSå‡å° æœ‰äº†é¢„æµ‹æ¨¡å‹ä»¥åï¼ŒåŸºäºæ—¶é—´åºåˆ—é¢„æµ‹äº† 4.Soar: Rank-based Static Object Allocationç°æœ‰çš„åˆæ¬¡æ”¾ç½®çš„åˆ†å±‚æ–¹æ¡ˆç›®çš„æ˜¯æœ€å¤§åŒ–åˆ©ç”¨å¿«é€Ÿå±‚å†…å­˜ã€‚ ä½œè€…å¸Œæœ›å¯»æ‰¾ä¸€ç§æ–¹æ³•æœ€åˆå°±èƒ½ç²¾å‡†æ”¾ç½®å†…å­˜ï¼Œé™ä½å†…å­˜è¿ç§»å¼€é”€ã€‚ è¯»åˆ°è¿™å¥è¯çš„æ—¶å€™è¿™éš¾å—ã€‚ã€‚ æŒ‘æˆ˜ï¼š While AOL-based prediction is effective at the workload level, it falls short for individual objects due to the semantic gap between architectural events and object-level memory accesses. å°½ç®¡AOLé¢„æµ‹åœ¨workloadçº§åˆ«èƒ½å¤Ÿè¡¨ç°å¾—å¾ˆå¥½ï¼Œä½†æ˜¯å´æ— æ³•åœ¨å•ä¸ªå˜é‡ä¸Šè¡¨ç°å¾ˆå¥½ã€‚ key insightï¼š â€‹\tdistribute CPU stalls across objects proportionally to their relative access frequencies based on the observed MLP and latencies, thereby approximating each objectâ€™s performance impact to application performance accurately. Object-Level Performance Profilingâ€‹\tPeriodically collects and processes three types of metrics: object metadata via object tracking memory accesses via PEBS-based LLC-miss sampling temporal performance via AOL-based prediction â‘ -â‘¡Object Tracking&#x2F;Flow é€šè¿‡LD_PRELOADçš„æ–¹å¼æ‹¦æˆªä¿®æ”¹ï¼Œè®°å½•äº”å…ƒç»„å¯¹è±¡æµ â‘¢-â‘£ç”¨PEBSè®°å½•LLC missesã€è®¿é—®æ—¶é—´æˆ³å’Œvaddr â‘¤-â‘¥åŸºäºAOLé¢„æµ‹æ€§èƒ½ â‘¦ åˆå¹¶ä¸‰ä¸ªå¯¹è±¡æµï¼ŒåŸºäºæ—¶é—´æˆ³æ¥åˆ¤æ–­åœ°å€ï¼Œæœ‰äº†è®¿é—®æ—¶é—´æˆ³ï¼Œå¯ä»¥è®¡ç®—è®¿é—®æ¬¡æ•°ä»¥åŠè®¿é—®æ¯”ä¾‹ã€‚ â‘§å°†è®¿å­˜æ¯”ä¾‹ä¸AOLå‡é€Ÿé¢„æµ‹ç»“åˆï¼Œè®¡ç®—å‡é€Ÿå¾—åˆ† å…·ä½“è®¡ç®—ç®—æ³•ï¼š æç«¯åœºæ™¯ä¸‹å¹¶è¡Œå°‘ï¼ŒMLP&#x3D;1ï¼Œå‡é€Ÿæ‰“åˆ†ç­‰äºæ—¶é—´æ®µå‡é€ŸP*è®¿å­˜æ¯”ä¾‹R é«˜MLPæ—¶ï¼Œç¼©å°è¯„åˆ† ä½MLPæ—¶ï¼Œæ”¾å¤§è¯„åˆ† ä½œè€…éšåè§£é‡Šäº†æ€æ ·è®¾è®¡çš„factorï¼Œä»¥åŠè®¡ç®—å•ä½å­—èŠ‚å¾—åˆ†ç­‰ã€‚ Object Allocationä¾ç„¶æ˜¯æ‰“åˆ†ä¹‹åè¿›è¡Œæ’åºï¼Œtopk æ”¾ç½®åˆ°å¿«é€Ÿå±‚ å½±å“æ’åä¸ä¸€å®šä¸è¯·æ±‚é¡ºåºç›¸åŒï¼Œå¦‚æœæ‰“åˆ†ä½çš„å…ˆåˆ°äº†ï¼Œåç»­æ‰“åˆ†é«˜çš„è¯·æ±‚åˆ°äº†ä¼šä½¿å¾—æ‰“åˆ†ä½çš„è¯·æ±‚é™çº§ã€‚ é—®é¢˜ï¼šæ˜¯ä¾æ®è°ƒç”¨æ ˆæ¥è¿›è¡Œåˆ†ç»„å¯¹å˜é‡è¿›è¡Œæ ‡è¯†çš„ï¼Œè¿™æ ·åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨è¿›è¡Œå†…å­˜åˆ†é…æ—¶ï¼Œå¤§å®¶è°ƒç”¨æ ˆéƒ½ç›¸åŒï¼Œè¿™æ ·å¹¶æ— æ³•åŒºåˆ†ã€‚ å…·ä½“è¦çœ‹ä»£ç å®ç°æ˜¯å¦åŒºåˆ†æ—¶ç©ºè°ƒç”¨ï¼Ÿ ç‰¹åˆ«æŒ‡å‡ºå¯ä»¥ä¸ä¸€äº›å¼‚æ„å†…å­˜æ„ŸçŸ¥çš„å†…å­˜åˆ†é…å™¨åŒæ—¶ä½¿ç”¨ï¼ˆmemkindã€Unified Memory Framework) Use Cases and Limitations1.HPCã€åœ¨çº¿æœåŠ¡è¿™ç§é•¿æ—¶é—´è®¿é—®çš„åº”ç”¨ï¼Œé™æ€åˆ†é…ä¸å†æœ€ä¼˜ 2.å‡è®¾å¯¹è±¡æ˜¯å‡åŒ€çš„ï¼Œå¯¹è±¡å†…éƒ¨çš„è®¿é—®æ¯ä¸€é¡µé¢‘ç‡éƒ½å·®ä¸å¤šã€‚ 5.Alto: AOL-based Adaptive Page Migrationsç°åœ¨æ–¹æ¡ˆçš„ä¸è¶³ï¼š 1.æŸäº›è¿ç§»æ²¡æœ‰ã€‚åªæ˜¯è¡¨é¢çƒ­ 2.è¿ç§»å¼€é”€å¾ˆå¤§ï¼Œç­–ç•¥åˆ°å•æ¬¡è¿ç§»éœ€è¦12us,è®¿é—®åˆ°è¿ç§»ä¸­çš„é¡µå¯¼è‡´CPU stall 3.CXLä¸localçš„å»¶è¿Ÿå’Œå¸¦å®½éƒ½åœ¨ç¼©å°ï¼Œè¿ç§»å¼€é”€çš„å½±å“å°±æ˜¾å¾—å¾ˆå¤§ 4.å†·é¡µä¸æ˜¯çœŸçš„å†·ã€‚ è™½ç„¶ç”¨ AOLï¼ˆAmortized Offcore Latencyï¼‰æ¥è®¾è®¡åŸºäºæ€§èƒ½æ„ŸçŸ¥çš„é¡µè¿ç§»ï¼ˆpage-level migrationï¼‰ç­–ç•¥æ˜¯å¾ˆæœ‰å‰æ™¯çš„ï¼Œä½†ç›®å‰ä»é¢ä¸´ä¸€äº›ç‹¬ç‰¹çš„æŒ‘æˆ˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å¦‚ä½•ç”¨ç°æœ‰ç²—ç²’åº¦ç¡¬ä»¶æ€§èƒ½è®¡æ•°å™¨ï¼ˆperformance countersï¼‰å‡†ç¡®ä¼°ç®—å•ä¸ªå†…å­˜é¡µçš„æ€§èƒ½å½±å“æ–¹é¢ã€‚ æ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨AOLè¾…åŠ©å¹³æ—¶çš„æ–¹æ³•å†³ç­–ä¸€ä¸‹ï¼š è€Œåè®²äº†ä¸TPPã€Nomadã€NBTç­‰æ–¹æ³•çš„é›†æˆã€‚ 6.Evaluation å…³æ³¨1ï¼šCXLæ¨¡æ‹Ÿæ–¹å¼ï¼šSKX lowering the uncore frequency and disabling cores on one NUMA node å…³æ³¨2ï¼šworkloads : GAPBSã€MLã€cachingã€SPEC2017 æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ’åº ALTOæ•ˆæœã€‚ ä¸è¶³ä¸æœºä¼šï¼š1.ä»MLPçš„è§’åº¦åˆ†æï¼Œå’Œé¢„å–æœ‰å…³ç³»å—ï¼Ÿå¯¹äºé¢„å–çš„å½±å“ï¼ˆå¦‚æœè¿™ä¸ªä¸œè¥¿èƒ½é‡åŒ–ï¼Œä¹Ÿèƒ½åˆ†æå‡ºå¾ˆå¤šä¸œè¥¿ï¼‰ 2.å¹¶æ²¡æœ‰è€ƒè™‘åŒºåˆ†è¯»å†™æ¯”ä¾‹çš„å½±å“ï¼Ÿ 3.æœ¬æ–‡ä¸­ç¬¬4èŠ‚æåˆ°çš„é€šè¿‡è®¿å­˜æ¯”ä¾‹æ¥åˆ†é…å†…å­˜slowdownçš„åšæ³•æ˜¯å¦åˆç†ï¼Ÿ æ˜¯å› ä¸ºå…¶æŒ‡æ ‡æ˜¯åŸºäºperf statçš„ï¼Œå¦‚æœå…¨éƒ¨ç”¨perf recordçš„æ–¹æ³•æ˜¯å¦ä¼šæ›´åŠ ç²¾ç¡®ï¼Ÿè¿™ä¸€ç‚¹ä½œè€…æ²¡æœ‰è¯¦ç»†æè¿°ã€‚ hard 4.å…¨éƒ¨æ”¾åœ¨è¿è¡Œæ—¶è¿›è¡Œå˜é‡åˆ†æä¼šä¸ä¼šå‘ç”Ÿé‡‡æ ·ä¸å‡†ç¡®çš„é—®é¢˜ï¼Œåœ¨NeoMemä¸­ä¹Ÿæœ‰ï¼Ÿä½†æ˜¯å¦‚ä½•è§£å†³ï¼Ÿå¯ä¸å¯ä»¥ç»“åˆNeoMemå®Œå…¨æ•è·æ•°æ®æµï¼Ÿ åŸºäºé‡‡æ ·ï¼Œé•¿ç”Ÿå‘½å‘¨æœŸçš„å¯èƒ½é‡‡é›†åˆ°ï¼ŒçŸ­ç”Ÿå‘½å‘¨æœŸå–æ ·ã€‚ æœºå™¨çš„æ‹“å±•æ€§ï¼Œé’ˆå¯¹SPXï¼Œå…¶ä»–çš„SPRã€EMRçš„å¯¹åº”äº‹ä»¶çš„æ‹“å±•æ€§æ›¿ä»£å¦‚ä½•ï¼Œæ˜¯å¦éƒ½åªæ˜¯PEBSï¼Ÿ ä¹±åºæ ¡æ­£çš„å½±å“å¤§ä¸å¤§ï¼Ÿ ä¾‹å¦‚ä¸‰æ®µå¼çš„ï¼Œç¬¬ä¸€æ¬¡è¿›è¡Œçƒ­ç‚¹ä»£ç è¯†åˆ«ï¼Œç¬¬äºŒæ¬¡å°†çƒ­ç‚¹ä»£ç å…¨éƒ¨å¸è½½åˆ°CXLï¼Œç„¶ååˆ©ç”¨Neomemæ•è·traceï¼Œä»è€Œå‡†ç¡®æ„ŸçŸ¥ï¼Œæœ€åæ ¹æ®å†³ç­–å®ç°æ•°æ®æ”¾ç½®ï¼Ÿ hard 5.ç»“åˆå†…å­˜åˆ†é…å™¨è¿›è¡Œå°å˜é‡é¡µå†…é›†ä¸­ä¼˜åŒ–ï¼Œå¤§å˜é‡çš„è®¿é—®æ˜¯å¦é›†ä¸­ï¼Ÿä¸é›†ä¸­çš„è¯å¯ä»¥ç”¨perfé‡‡é›†åœ°å€ï¼Œç„¶åç»˜åˆ¶è®¿å­˜ç›´æ–¹å›¾ã€‚"},{"title":"CYY-RV64.zip","path":"/2025/07/07/è®ºæ–‡é˜…è¯»/CYY-RV64.zip/","content":"https://www.rv64.zip/ Background&amp;Motivation1.ç†æƒ³çš„RISC-Væ¿å­åº”å½“åŒ…å«ä¸€ç»„æ ‡å‡†çš„æŒ‡ä»¤æ‹“å±•RVA23U64,ä½†æ˜¯ç›®å‰çš„ç”Ÿæ€ä¸‹ï¼Œä¸åŒç¡¬ä»¶æ”¯æŒçš„æ‹“å±•ä¸æ ‡å‡†å¹¶ä¸ä¸€è‡´ï¼› 2.ç¼–è¯‘å™¨å’ŒCPUæ²¡æœ‰é’ˆå¯¹æ–°æ‹“å±•è¿›è¡Œä¼˜åŒ–çš„è¯ï¼Œç›²ç›®æ‰“å¼€æ–°æ‹“å±•åè€Œä¼šå¯¼è‡´ç¨‹åºæ€§èƒ½ä¸‹é™ Existing solution1.target_clones attributes æ”¹ä»£ç ï¼Œç»´æŠ¤æˆæœ¬é«˜ é—´æ¥è°ƒç”¨å¼€é”€ï¼š When using target_clones or target_version, the compiler will use GNU IFUNC to dispatch the function call to the correct version at runtime. This introduces an overhead of an indirect function call, and also refuses some optimizations such as inlining. When compiling without -fno-plt or with -fno-pic, things will be worse since it requires 2 level call to the function (the first level is PLT call). å‰ç½®çŸ¥è¯†ï¼š PLTï¼ˆProcedure Linkage Table) PLT æ˜¯åŠ¨æ€é“¾æ¥ï¼ˆå…±äº«åº“ï¼‰ä¸­ç”¨äºå®ç° å»¶è¿Ÿç»‘å®šï¼ˆLazy Bindingï¼‰ çš„æ ¸å¿ƒç»“æ„ï¼Œè§£å†³ç¨‹åºè°ƒç”¨å…±äº«åº“å‡½æ•°æ—¶çš„è·³è½¬é—®é¢˜ã€‚ é¦–æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼š ç¨‹åºè·³è½¬åˆ° PLT è¡¨ä¸­çš„å¯¹åº”æ¡ç›®ï¼ˆå¦‚ printf@pltï¼‰ã€‚ PLT æ¡ç›®åŒ…å«ä¸€æ¡è·³è½¬æŒ‡ä»¤ï¼Œé»˜è®¤æŒ‡å‘ åŠ¨æ€é“¾æ¥å™¨ï¼ˆ_dl_runtime_resolveï¼‰ã€‚ åŠ¨æ€é“¾æ¥å™¨è§£æå‡½æ•°çœŸå®åœ°å€ï¼Œå¹¶å›å¡«åˆ° GOTï¼ˆGlobal Offset Tableï¼‰ã€‚ åç»­è°ƒç”¨æ—¶ï¼š PLT ç›´æ¥é€šè¿‡ GOT è·³è½¬åˆ°çœŸå®å‡½æ•°åœ°å€ï¼ˆæ— éœ€å†æ¬¡è§£æï¼‰ã€‚ -fno-plt é€‰é¡¹å¯ç»•è¿‡ PLTï¼Œç›´æ¥é€šè¿‡ GOT è°ƒç”¨ IFUCNï¼ˆIndirect Functionï¼‰ è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©å‡½æ•°çš„å…·ä½“å®ç°,é€šè¿‡å‡½æ•°æŒ‡é’ˆè·³è½¬ï¼Œæ¯”ç›´æ¥è°ƒç”¨å¤šä¸€æ¬¡å¯»å€ï¼Œåœ°å€è¿è¡Œæ—¶ç¡®å®šï¼Œæ— æ³•å†…è” å®šä¹‰æ—¶é€šè¿‡ __ attribute__((ifunc(&quot;resolver&quot;)))æ ‡è®°å‡½æ•°ï¼Œæä¾›ä¸€ä¸ªè§£æå™¨å‡½æ•°ã€‚ 12345static void* my_func_resolver() &#123; if (__builtin_cpu_supports(&quot;avx2&quot;)) return &amp;my_func_avx2; else return &amp;my_func_default;&#125;void my_func() __attribute__((ifunc(&quot;my_func_resolver&quot;))); æœ€ä½³æ¡ˆä¾‹ï¼šGLibé€šè¿‡IFUNCä¸ºmemcpyæä¾›äº†å¤šä¸ªå®ç°ã€‚ Solution1.Decoupled function clone tableâ€‹\tç›¸å½“äºå°†target_clones attributesä»å‡½æ•°å±‚æå‡åˆ°äº†æ–‡ä»¶å±‚ï¼Œä¸éœ€è¦ä¿®æ”¹æºä»£ç ã€‚patch 2.Automatic function clone table generationâ€‹\tæ ¹æ®perfç»“æœé€‰æ‹©æœ€ä½³çš„result 3.é’ˆå¯¹ç›´æ¥è°ƒç”¨æäº†ä¸€äº›ç¼–è¯‘å™¨ç«¯å’ŒCPUç«¯çš„æ”¯æŒ æ›´å¤šæ–¹æ¡ˆæœŸå¾…CYYå¸ˆå…„çš„æ­£å¼è®ºæ–‡ Other1.è‹±è¯­è¡¨è¾¾è¯»èµ·æ¥å¥½èˆ’æœ 2.ç±»ä¼¼çš„æ–¹æ¡ˆåœ¨box64ä¹‹ç±»çš„äºŒè¿›åˆ¶ç¿»è¯‘åœºæ™¯ä¸‹ä¹Ÿå¤§æœ‰ç”¨å¤„ã€‚"},{"title":"CPPæ‚è®°","path":"/2025/06/18/CPP/CPPæ‚è®°/","content":"å…¨å±€é™æ€å˜é‡ã€å‡½æ•°å†…é™æ€å˜é‡ã€attribute((destructor))ææ„é¡ºåºæ„é€ ææ„é¡ºåºçš„ä¸ç¡®å®šæ€§ ä»¥åŠé™æ€å‡½æ•°è·å–çš„å•ä¾‹ã€‚ C++ æ ‡å‡†è§„å®šï¼šåŒä¸€ä¸ªç¼–è¯‘å•å…ƒï¼ˆåŒä¸€ä¸ª cpp æ–‡ä»¶ï¼‰å†…ï¼Œé™æ€&#x2F;å…¨å±€å¯¹è±¡çš„ææ„é¡ºåºä¸æ„é€ é¡ºåºç›¸åã€‚ ä½†ä¸åŒç¼–è¯‘å•å…ƒï¼ˆä¸åŒ cpp æ–‡ä»¶&#x2F;soï¼‰ä¹‹é—´çš„ææ„é¡ºåºæ˜¯æœªå®šä¹‰çš„ã€‚ å±€éƒ¨ staticï¼ˆå³å‡½æ•°å†… staticï¼‰å¯¹è±¡çš„ææ„é¡ºåºä¸å…¶å®šä¹‰é¡ºåºæœ‰å…³ï¼Œä½†ä¹Ÿåªåœ¨åŒä¸€ç¼–è¯‘å•å…ƒå†…æœ‰ä¿è¯ã€‚ è‹¥ä¸€ä¸ªå˜é‡ä»…åœ¨å•ä¸ªæ–‡ä»¶ä¸­å¯è§ï¼Œåˆ™å»ºè®®å°†è¿™ä¸ªå˜é‡å£°æ˜ä¸ºé™æ€å…¨å±€å˜é‡ï¼Œstaticä¿®é¥°çš„é™æ€å…¨å±€å˜é‡ä»…åœ¨å½“å‰æ–‡ä»¶ä¸­å¯è§ã€‚ å¦‚æœä¸€ä¸ªå…¨å±€å˜é‡åªè¢«å•ä¸ªå‡½æ•°ä½¿ç”¨,å°†å…¶æ”¹ä¸ºè¯¥å‡½æ•°çš„é™æ€å±€éƒ¨å˜é‡å¯ä»¥è¿›ä¸€æ­¥é™åˆ¶å˜é‡çš„ä½œç”¨åŸŸ,æé«˜ä»£ç çš„å†…èšæ€§,é™ä½è€¦åˆåº¦ã€‚é™æ€å±€éƒ¨å˜é‡å…·æœ‰å…¨å±€å¯¿å‘½ä½†å±€éƒ¨ä½œç”¨åŸŸçš„ç‰¹ç‚¹, é™æ€å…¨å±€å˜é‡æ˜¯å­˜å‚¨åœ¨**é™æ€æ•°æ®åŒºçš„,**è€Œä¸æ˜¯æ ˆåŒº,å› æ­¤é™æ€å…¨å±€å˜é‡çš„å¤§å°ä¸ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚æ ˆæº¢å‡ºé€šå¸¸æ˜¯ç”±äºå‡½æ•°è°ƒç”¨å±‚æ¬¡è¿‡æ·±æˆ–å±€éƒ¨å˜é‡è¿‡å¤§å¯¼è‡´çš„ã€‚ ç±»çš„å†…å­˜å ç”¨ 1.32ä½ç³»ç»Ÿä¸­è™šå‡½æ•°æŒ‡é’ˆä¸º4å­—èŠ‚ï¼Œ64ä½ä¸º8å­—èŠ‚ 2.åªéœ€è¦è€ƒè™‘è™šå‡½æ•°æŒ‡é’ˆï¼Œè™šå‡½æ•°è¡¨ä¸è®¡å…¥æŸä¸ªç±»çš„èµ„æº 3.charå ä¸€å­—èŠ‚ï¼Œä½†æ˜¯éœ€è¦è€ƒè™‘å†…å­˜è°ƒç”¨ 4.å¦‚æœæœ‰è™šç»§æ‰¿ï¼Œåˆ™å¤šä¸€ä¸ªè™šåŸºç±»æŒ‡é’ˆã€‚ 5.ç©ºç±»å ä¸€ä¸ªå­—èŠ‚ï¼ˆç”¨äºæ ‡è¯†ï¼‰ æŒ‡é’ˆå¥½é¢˜ int arr[5]&#x3D;{1,2,3,4,5};åœ¨è¿™ä¸ªæ•°ç»„çš„å®šä¹‰ä¸­ï¼Œé€šå¸¸çš„ç†è§£arræ˜¯æ•°ç»„çš„åœ°å€å³æ•°ç»„é¦–å…ƒç´ çš„åœ°å€ï¼Œè¿›ä¸€æ­¥ç†è§£arræ˜¯ä¸€ä¸ªintå‹çš„æŒ‡é’ˆå¸¸é‡ï¼Œå¸¸é‡+1åœ°å€åç§»sizeof(int)ï¼Œæ‰€ä»¥arr+1æ˜¯é¦–å…ƒç´ ä¸‹ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼›è€ƒè™‘åˆ°è¿™ä¸€å±‚å°±ä¸éš¾ç†è§£**&amp;arr*çš„å«ä¹‰ï¼Œ&amp;arræ˜¯å¯¹arrå–åœ°å€ï¼Œç»“æœä¹Ÿæ˜¯ä¸ªåœ°å€ï¼Œåªæ˜¯è¿™ä¸ªåœ°å€çš„ç±»å‹æ˜¯æŒ‡å‘æœ‰5ä¸ªintç±»å‹æ•°æ®çš„æ•°ç»„çš„æŒ‡é’ˆå¸¸é‡ï¼Œè¿™ä¸ªå¸¸é‡+1åœ°å€åç§»5sizeof(int)ã€‚ å„çº§æŒ‡é’ˆç®—å„çº§çš„ï¼š ä¸»è¦å°±æ˜¯ç†è§£&amp; å’Œ * çš„â€œå‡çº§é™çº§â€ï¼› é“¾æ¥ï¼šhttps://www.nowcoder.com/exam/test/89156461/submission?examPageSource=Intelligent&pid=62380309&testCallback=https%3A%2F%2Fwww.nowcoder.com%2Fexam%2Fintelligent%3FquestionJobId%3D10%26subTabName%3Dintelligent_page%26tagId%3D21000&amp;testclass&#x3D;%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91 Copy and Swapä¼ ç»Ÿåšæ³•operator= 12345678910111213141516171819202122class MyString &#123;private: char* data; // åŠ¨æ€åˆ†é…çš„å­—ç¬¦ä¸²public: // èµ‹å€¼è¿ç®—ç¬¦é‡è½½ MyString&amp; operator=(const MyString&amp; other) &#123; // æ£€æŸ¥è‡ªèµ‹å€¼ if (this == &amp;other) &#123; return *this; &#125; // é‡Šæ”¾å½“å‰å¯¹è±¡çš„èµ„æº delete[] data; // å¤åˆ¶æ•°æ® data = new char[std::strlen(other.data) + 1]; std::strcpy(data, other.data); // è¿”å›å½“å‰å¯¹è±¡çš„å¼•ç”¨ return *this; &#125;&#125;; Copy and Swap 123456789MyString&amp; operator=(const MyString&amp; other) &#123; // æ£€æŸ¥è‡ªèµ‹å€¼ if (this == &amp;other) &#123; return *this; &#125; MyString tmp&#123;other&#125;; std::swap(data,other.data); return *this;&#125; ä¼˜åŠ¿ï¼š å¼‚å¸¸å®‰å…¨ï¼šä¼ ç»Ÿæ–¹æ³•newæŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå¯¹è±¡å‡ºäºæ— æ•ˆçŠ¶æ€ã€‚dataå·²ç»è¢«åˆ é™¤ï¼Œä½†æ˜¯åˆ†é…å¤±è´¥ å¼ºå¼‚å¸¸å®‰å…¨æ€§: å¦‚æœä¸€ä¸ªæ“ä½œå› ä¸ºå¼‚å¸¸è€Œå¤±è´¥ï¼Œç¨‹åºçš„çŠ¶æ€ä¼šå›æ»šåˆ°æ“ä½œä¹‹å‰çš„æ ·å­ï¼Œå°±åƒè¿™ä¸ªæ“ä½œä»æ¥æ²¡æ‰§è¡Œè¿‡ä¸€æ · ä»£ç å¤ç”¨ï¼šå¤ç”¨æ‹·è´æ„é€ å‡½æ•° è‡ªåŠ¨èµ„æºç®¡ç†ï¼šè‡ªåŠ¨é‡Šæ”¾tmpèµ„æº C++11 å†™æ³• 123456MyString&amp; operator=(MyString other) &#123;//å€¼ä¼ é€’ //ä¼ å…¥å·¦å€¼ï¼šæ‹·è´æ„é€  //ä¼ å…¥å³å€¼ï¼šç§»åŠ¨æ„é€  std::swap(data,other.data); return *this; &#125; ç§»åŠ¨æ„é€ è¿˜æ˜¯æ‹·è´æ„é€ ï¼Ÿ å·¦å€¼ï¼šå«å¾—å‡ºåå­— å³å€¼ï¼šå«ä¸å‡ºåå­—ï¼ˆä¸´æ—¶å˜é‡ï¼Œstd::moveï¼‰ å·¦å€¼ç”¨æ‹·è´æ„é€ ï¼Œå³å€¼ç”¨ç§»åŠ¨æ„é€ ï¼ˆå·ï¼‰"},{"title":"CXL-place-llvm-PGOæ‚è®°","path":"/2025/04/23/å¤‡å¿˜å½•/CXL-place-llvm-PGOæ‚è®°/","content":"CXL-place-llvm-PGOæ‚è®° è®°å½•å®ŒæˆllvmPGO ä¸­çš„ä¸€äº›çŸ¥è¯†æ‚è®° 1.llvmä¸­çš„mallocé‡å®šå‘æ‹¦æˆªæ¡ˆä¾‹ï¼š2.å¤åˆ¶æ„é€ ã€ç§»åŠ¨æ„é€ ã€åŸåœ°æ„é€ 3.å†…å­˜åˆ†é…å™¨çš„å®ç°https://blog.lfalive.top/2022/02/15/JeMalloc/ http://hydra.azilian.net/Papers/jemalloc.pdf"},{"title":"LLVM explore","path":"/2025/04/23/LLVM/LLVM/","content":"å…¥é—¨llvmç¬”è®° æ–°æ—§æ–°å¢passæµç¨‹CRTPï¼ˆå¥‡å¼‚é€’å½’æ¨¡æ¿æ¨¡å¼ï¼‰(ä»¥ä¸‹å†…å®¹åŸºäºAIç”Ÿæˆåä¿®æ”¹) é€šå¸¸é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼ä¹Ÿæ˜¯è¿™æ ·ï¼Œåªæ˜¯ä¸çŸ¥é“å«è¿™ä¸ªåå­— CRTPï¼ˆCuriously Recurring Template Patternï¼Œå¥‡å¼‚é€’å½’æ¨¡æ¿æ¨¡å¼ï¼‰æ˜¯C++ä¸­çš„ä¸€ç§é«˜çº§æ¨¡æ¿ç¼–ç¨‹æŠ€æœ¯ï¼Œé€šè¿‡è®©ä¸€ä¸ªç±»ç»§æ‰¿è‡ªä»¥è‡ªèº«ä¸ºæ¨¡æ¿å‚æ•°çš„åŸºç±»æ¨¡æ¿ï¼Œå®ç°é™æ€å¤šæ€æˆ–ä»£ç å¤ç”¨ã€‚ 123template &lt;typename Derived&gt;class Base &#123; /* åŸºç±»ä½¿ç”¨Derivedç±»å‹ */ &#125;;class MyClass : public Base&lt;MyClass&gt; &#123; /* æ´¾ç”Ÿç±»å°†è‡ªèº«ä½œä¸ºæ¨¡æ¿å‚æ•°ä¼ é€’ç»™åŸºç±» */ &#125;; æ ¸å¿ƒä½œç”¨1. é™æ€å¤šæ€ï¼ˆç¼–è¯‘æ—¶å¤šæ€ï¼‰ åŠ¨æ€å¤šæ€ï¼ˆè™šå‡½æ•°ï¼‰çš„é—®é¢˜ï¼šè¿è¡Œæ—¶è™šè¡¨æŸ¥æ‰¾å¯¼è‡´æ€§èƒ½å¼€é”€ã€‚ CRTPçš„è§£å†³æ–¹æ¡ˆï¼šåŸºç±»åœ¨ç¼–è¯‘æ—¶é€šè¿‡æ¨¡æ¿å‚æ•°ç›´æ¥è°ƒç”¨æ´¾ç”Ÿç±»çš„æ–¹æ³•ã€‚ 123456789101112131415161718192021template &lt;typename Derived&gt;class Animal &#123;public: void speak() &#123; static_cast&lt;Derived*&gt;(this)-&gt;speakImpl(); // ç¼–è¯‘æ—¶ç¡®å®šè°ƒç”¨ &#125;&#125;;class Cat : public Animal&lt;Cat&gt; &#123;public: void speakImpl() &#123; std::cout &lt;&lt; &quot;Meow &quot;; &#125;&#125;;class Dog : public Animal&lt;Dog&gt; &#123;public: void speakImpl() &#123; std::cout &lt;&lt; &quot;Woof &quot;; &#125;&#125;;// ä½¿ç”¨Animal&lt;Cat&gt; cat;cat.speak(); // è¾“å‡º &quot;Meow&quot;ï¼ˆæ— è™šå‡½æ•°å¼€é”€ï¼‰ 2. ä»£ç å¤ç”¨ åŸºç±»å¯æä¾›é€šç”¨é€»è¾‘ï¼Œæ´¾ç”Ÿç±»é€šè¿‡ç‰¹åŒ–å®ç°å·®å¼‚éƒ¨åˆ†ã€‚ 123456789101112131415161718192021template &lt;typename Derived&gt;class Counter &#123;protected: static int count;public: Counter() &#123; ++count; &#125; static int getCount() &#123; return count; &#125;&#125;;template &lt;typename Derived&gt;int Counter&lt;Derived&gt;::count = 0;// ç»Ÿè®¡å¯¹è±¡å®ä¾‹æ•°çš„ç±»class Widget : public Counter&lt;Widget&gt; &#123;&#125;;class Gadget : public Counter&lt;Gadget&gt; &#123;&#125;;// ä½¿ç”¨Widget w1, w2;Gadget g1;std::cout &lt;&lt; Widget::getCount(); // è¾“å‡º 2std::cout &lt;&lt; Gadget::getCount(); // è¾“å‡º 1 CRTP vs è™šå‡½æ•° ç‰¹æ€§ CRTP è™šå‡½æ•° å¤šæ€æ—¶æœº ç¼–è¯‘æ—¶ è¿è¡Œæ—¶ æ€§èƒ½ æ— é¢å¤–å¼€é”€ï¼ˆç›´æ¥è°ƒç”¨ï¼‰ è™šè¡¨æŸ¥æ‰¾å¼€é”€ çµæ´»æ€§ ç±»å‹å›ºå®šï¼ˆæ¨¡æ¿å‚æ•°éœ€æ˜ç¡®ï¼‰ æ”¯æŒè¿è¡Œæ—¶ç±»å‹åŠ¨æ€æ›¿æ¢ é€‚ç”¨åœºæ™¯ é«˜æ€§èƒ½åº“ã€æ¡†æ¶åŸºç¡€è®¾æ–½ éœ€è¦è¿è¡Œæ—¶åŠ¨æ€è¡Œä¸ºçš„æƒ…å†µ CRTPçš„å…¸å‹åº”ç”¨åœºæ™¯ ç¼–è¯‘æ—¶å¤šæ€ï¼šå¦‚æ•°å­¦åº“ä¸­çš„å‘é‡&#x2F;çŸ©é˜µè¿ç®—ï¼ˆEigenåº“ï¼‰ã€‚ å¯¹è±¡è®¡æ•°ï¼šç»Ÿè®¡ä¸åŒæ´¾ç”Ÿç±»çš„å®ä¾‹æ•°é‡ã€‚ Mixinæ¨¡å¼ï¼šä¸ºç±»åŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼ˆå¦‚LLVMçš„PassInfoMixinï¼‰ã€‚ é“¾å¼è°ƒç”¨ï¼šè¿”å›æ´¾ç”Ÿç±»å¼•ç”¨ä»¥å®ç°é“¾å¼è¯­æ³•ï¼ˆreturn static_cast&lt;Derived&amp;&gt;(*this);ï¼‰ã€‚ 4 LLVMä¸CPPå®ç°DenseMapä¸stdMapdyn_castä¸RTTI isadef-use user-valueä¸ºä»€ä¹ˆllvmä¸­Userä¼šç»§æ‰¿value å¤„ç†å™¨ç¡¬ä»¶è®¡æ•°pt LBR PEBS"},{"title":"é¾™èœ¥CXLè®²è§£-é«˜æ˜¾æ‰¬","path":"/2025/01/06/CXL/é¾™èœ¥CXLè®²è§£-é«˜æ˜¾æ‰¬/","content":"CXLæŠ€æœ¯ä»‹ç»å¯¹è§†é¢‘é“¾æ¥çš„PPTæ¬è¿ï¼Œæ–¹ä¾¿å¿«é€Ÿé˜…è¯» é«˜æ˜¾æ¨ æµªæ½® ç»¼è¿° åè®®åè®®æ¼”è¿› 1.1å†…å­˜æ‹“å±• 2.0å†…å­˜èµ¤åŒ– 3.0ç‰¹æ€§ CXLå­åè®® CXLè®¾å¤‡ CXL Fabric å‚è€ƒVPNï¼Œä¸‹è¾¹ä¸¤å¼ ä¸ºå•switch CXL RASç‰¹æ€§ å†…å­˜çƒ­æ’æ‹”ï¼Ÿå¦‚ä½•é¿å…å®•æœº CXLåˆå§‹åŒ– RCRB CXL 1.1è·‘CXL2å®ç°åè®®å…¼å®¹ CXLæ–¹æ¡ˆ æ± åŒ–ç®¡ç†ï¼šFMä¸­çš„bindå’ŒUnBind ä¸šç•Œæ–¹æ¡ˆ è¡¥å……"},{"title":"OCP China 2024 CXL è®ºå›å­¦ä¹ ç¬”è®°","path":"/2025/01/06/CXL/OCP-China-2024-CXL-è®ºå›å­¦ä¹ ç¬”è®°/","content":"OCP China 2024 CXLè®ºå› å­¦ä¹ ç¬”è®°ä¼šè®®é“¾æ¥ é˜¿é‡Œäº‘ æ•°æ®ä¸­å¿ƒé«˜æ€§èƒ½Scale Up äº’è”ç³»ç»Ÿè¶‹åŠ¿ å­”é˜³ é˜¿é‡Œäº‘è¶…é«˜é€Ÿäº’è”è´Ÿè´£äºº èƒ¡æ–‡æ™® CXLéƒ¨åˆ† Scale Up äº‘çš„è§’åº¦ å…³æ³¨ä¸¤ä¸ªè®¡ç®— ï¼š é€šç”¨è®¡ç®—ã€GPUè®¡ç®— é€šç”¨è®¡ç®—ä¸Šï¼š è€ƒè™‘å¼¹æ€§åˆ†æï¼šå­˜å‚¨ä¸Š-&gt;äº‘ç›˜æŠ€æœ¯ ç½‘ç»œ-&gt;CIPUç½‘ç»œè™šæ‹ŸåŒ– å†…å­˜ä¸Š-&gt;CXL GPUä¸Šï¼šå¤§æ¨¡å‹å•æ¬¡ä»»åŠ¡ï¼Œæ•°æ®å¹¶è¡Œã€æµæ°´çº¿å¹¶è¡Œã€tensorå¹¶è¡Œã€ä¸“å®¶å¹¶è¡Œï¼Œéƒ½å…·æœ‰è¾ƒé«˜çš„å¸¦å®½è¦æ±‚ CXL æœºæŸœå†…çš„èµ„æºå¼¹æ€§å®ç°éœ€è¦æ»¡è¶³é«˜æ€§èƒ½æ¥å£ã€èµ„æºå…±äº«ã€æè‡´å¼¹æ€§ã€è½¯ä»¶ç”Ÿæ€å…¼å®¹æ€§ç­‰è¦æ±‚ã€‚CXLç‰¹æ€§ç¬¦åˆè¿™äº›è¦æ±‚ã€‚CXLå°†ä¸€è‡´æ€§è®¿é—®ä»CPUå†…éƒ¨æ‹“å±•åˆ°CPUå’Œå†…å­˜ä¹‹é—´ï¼Œå®ç°å¤šæœåŠ¡å™¨ä¹‹é—´çš„äº’è”ã€‚ CXLçš„æ¼”è¿› GIM ï¼š P2P ï¼š DSPä¸type3äº’è”ï¼Œtype3å¯ä»¥åˆ†é…ç»™DSPæˆ–è€…host HBR-&gt;PBR:ä¸æ­¢æ ‘çŠ¶ã€æ˜ŸçŠ¶ã€ç½‘ç»œçŠ¶ E3.s çƒ­æ’æ‹”ï¼Œä¾¿äºå¯æ‹“å±• JBOM å¤§å®¹é‡ PEMEM ï¼šæ”¯æŒ2.0ï¼Œæ»¡è¶³rediså®æ—¶æ€§æŒä¹…åŒ–ç­‰è¦æ±‚ åŸºäº å†…å­˜ä¸CPUå®ç°èµ„æºè§£è€¦ CXLåœ¨å°æ•°æ®ä¸Šä¼ è¾“æ€§èƒ½å¤§å¤§æé«˜ï¼› intel: CXL on Intel Xeon@ Platform èµµæ£®æ— CXL overview CXL Specification Summary"},{"title":"Kernel-compile","path":"/2024/12/05/Linux kernel/Kernel-compile/","content":"å†…æ ¸ç¼–è¯‘123456789101112131415161718192021222324252627282930#æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬uname -a#æºç è·å–sudo apt-get install linux-sourcecd /usr/srctar xvf linux-source-*.tar.bz2cd linux-source-*#è¡¥ä¸åº”ç”¨patch -p1 &lt; /path/to/patch.diff#`-p1`é€‰é¡¹å¯èƒ½éœ€è¦æ ¹æ®è¡¥ä¸æ–‡ä»¶çš„æ ¼å¼è¿›è¡Œè°ƒæ•´ã€‚make menuconfig #æˆ–è€…oldconfig,æœ¬è´¨æ˜¯é…ç½®/usr/src/configmake -j$(nproc)#æ ¹æ® .config é…ç½®æ–‡ä»¶ç¼–è¯‘å†…æ ¸ã€å†…æ ¸æ¨¡å—å’Œå…¶ä»–å¿…è¦çš„æ–‡ä»¶ï¼Œç”Ÿæˆå†…æ ¸é•œåƒï¼ˆvmlinuzï¼‰å’Œå…¶ä»–ç›¸å…³çš„æ–‡ä»¶#ç¼–è¯‘è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°æ¯åŒ…å¤´æ–‡ä»¶æˆ–è€…å…¶ä»–é”™è¯¯ï¼Œå¯èƒ½æ˜¯ç‰ˆæœ¬åŸå› ï¼Œé’ˆå¯¹æŠ¥é”™è§£å†³å³å¯#å†…æ ¸å®‰è£…#å®‰è£…è¿‡ç¨‹å¯èƒ½ä¼šå‡ºç°å¤´æ–‡ä»¶æŠ¥é”™æˆ–è€…ç¼ºåº“ã€æˆ–å®‰è£…å®Œæˆåç¼ºåº“ï¼Œåªéœ€è¦aptå®‰è£…å¯¹åº”çš„åº“å°±å¥½ï¼Œmakeè¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨hook#å®‰è£…å†…æ ¸æ¨¡å—(åœ¨è¿è¡Œæ—¶å¯ä»¥åŠ è½½æˆ–å¸è½½çš„æ¨¡å—)#ä»ç¼–è¯‘è¾“å‡ºçš„ç›®å½•ï¼ˆå¦‚ lib/modules/&lt;kernel_version&gt;/ï¼‰,å¹¶æ‰§è¡Œ depmod æ¥ç”Ÿæˆæ¨¡å—ä¾èµ–å…³ç³»sudo make modules_install#å†…æ ¸é•œåƒï¼ˆå¦‚ vmlinuzï¼‰ã€é…ç½®æ–‡ä»¶ï¼ˆå¦‚ configï¼‰ã€ç¬¦å·è¡¨æ–‡ä»¶ï¼ˆå¦‚ System.mapï¼‰å’Œ initrd é•œåƒå®‰è£…åˆ° /boot ç›®å½•sudo make install#æ›´æ–°å¯åŠ¨å¼•å¯¼ç¨‹åºsudo update-grup å…³äºé…ç½®é€‰é¡¹ç›¸å…³æ“ä½œï¼Œå‚è€ƒï¼š:star::star:Linux å†…æ ¸åŠ¨æ‰‹ç¼–è¯‘å®ç”¨æŒ‡å— KGDBé…ç½®ç¼–è¯‘é€‰é¡¹ å‚è€ƒèµ„æ–™KGDBåŸç†åˆ†æåŠè¿œç¨‹æŒ‚è½½è°ƒè¯•ARM64å†…æ ¸ å†…æ ¸å¯åŠ¨å‚æ•° 1kgdboc=ttyS0,115200 kgdbwait kgdbtcp=192.168.1.2:1234 kgdboc=ttyS0,115200ï¼šè®¾ç½®ä¸²å£è°ƒè¯•ï¼ˆå¯é€‰ï¼‰ kgdbwaitï¼šå¯åŠ¨æ—¶ç­‰å¾…è°ƒè¯•å™¨è¿æ¥ kgdbtcp=192.168.1.2:1234ï¼šè¢«è°ƒè¯•ä¸»æœºçš„IPå’Œç«¯å£ æ°¸ä¹…ä¿®æ”¹ï¼š/etc/default/grubä¸‹GRUB_CMDLINE_LINUXå˜é‡ proxmox-boot-toolproxmox-boot-toolï¼Œä¸€ä¸ªè„šæœ¬ï¼Œè®¾ç½®å¯åŠ¨å†…æ ¸ã€å¢åˆ å†…æ ¸ç­‰ Proxmox VEï¼ˆProxmox Virtual Environmentï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„è™šæ‹ŸåŒ–ç®¡ç†å¹³å°ï¼Œä¸“ä¸ºä¼ä¸šçº§ç¯å¢ƒè®¾è®¡ï¼Œèƒ½å¤Ÿç®¡ç†è™šæ‹Ÿæœºï¼ˆVMï¼‰ã€å®¹å™¨ã€å­˜å‚¨å’Œé›†ç¾¤ã€‚ å…¶ä¸­ proxmox-boot-toolè„šæœ¬åœ¨å†…æ ¸ç®¡ç†åˆ‡æ¢è¿‡ç¨‹ä¸­æ¯”è¾ƒæœ‰ç”¨ï¼Œè¿™é‡Œåšå¤‡ä»½ï¼Œä¾¿äºä¸æ•´ä½“ä¸‹è½½Proxmox VEè€Œå•ç‹¬ä½¿ç”¨æ­¤å·¥å…·ï¼Œä»…ä¾›ä¸ªäººå­¦ä¹ ä½¿ç”¨ ä½¿ç”¨å‰ææ˜¯éœ€è¦å…ˆä¸‹è½½Promox VE å…ˆæ¢æº/etc/apt/sources.list.d/pve-no-subscription.list 12deb http://mirrors.ustc.edu.cn/proxmox/debian/pve bookworm pve-no-subscriptiondeb http://mirrors.tuna.tsinghua.edu.cn/proxmox/debian/pve bookworm pve-no-subscription è®°å¾—æŠŠ&#x2F;etc&#x2F;apt&#x2F;sources.list.dä¸‹åŸæœ‰çš„æºæ³¨é‡Šæ‰ kernel addç­‰ åœ¨ &#x2F;bootä¸‹è¾¹æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬å· ä¹‹åå¯é€šè¿‡apt search \\install æœç´¢ä¸‹è½½å¯¹åº”çš„pveç‰ˆæœ¬å†…æ ¸ proxmox-boot-toolä¸‹è½½é“¾æ¥,å…ˆä¸‹è½½proxmox-kernel-helper å‚è€ƒé“¾æ¥ï¼š https://kernelnewbies.org/KernelBuild"},{"title":"Hexo","path":"/2024/11/28/Hexo/hexo/","content":"Hexoéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜å›¾ç‰‡ä¸Typoraå…¼å®¹ç½‘ä¸Šç»™äº†å¾ˆå¤šæ–¹æ³•ï¼Œå°è¯•æ²¡æœ‰æ•ˆæœï¼Œè‡ªå·±å°è¯•çš„æ–¹æ¡ˆï¼š å¸è½½æ’ä»¶hexo-asset-image: yarn remove hexo-asset-image,GitHubæœ‰ä¿®æ”¹çš„å¯¹åº”æ’ä»¶ï¼Œä½†æ˜¯ä½¿ç”¨æ— æ•ˆæœ typoraé…ç½® Typoraæ–°æ’å…¥å›¾ç‰‡è·¯å¾„æ˜¾ç¤ºä¸ºï¼š Hexoéƒ¨ç½²æ—¶æ­£å¸¸æ˜¾ç¤º Hexoä¸ç”Ÿæ•ˆé—®é¢˜Hexoéƒ¨ç½²åˆ°githubä¸Šä¸ç”Ÿæ•ˆï¼Œç½‘ä¸Šè§£å†³æ–¹æ¡ˆè¯´éœ€è¦é™¤Mainæˆ–è€…Masteråˆ†æ”¯ä»¥å¤–é¢å¤–æ„å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶åç½‘ç«™æ¨é€åˆ°è¿™ä¸ªåˆ†æ”¯ä¸Šï¼Œå®é™…ä½¿ç”¨ä¸ç®¡ç”¨ã€‚ é¦–å…ˆï¼Œåªéœ€è¦ç»´æŠ¤ä¸€ä¸ªä¸»åˆ†æ”¯ï¼Œä¸éœ€è¦å…¶ä»–åˆ†æ”¯ï¼› å…¶æ¬¡ï¼Œhexo -dæ‰§è¡Œä»¥åï¼Œmainåˆ†æ”¯ä¸­å³ä½¿å·²ç»æ›´æ–°äº†ä»£ç ï¼Œä½†æ˜¯github pageæ›´æ–°ä¹Ÿéœ€è¦ä¸€æ®µæ—¶é—´ï¼Œéƒ¨ç½²é¢‘ç¹ä¼šäº§ç”Ÿæ’é˜Ÿ ä»“åº“ä¸»é¡µgithub-pagesä¸Šå¯ä»¥è§‚å¯Ÿåˆ°ç”Ÿæˆé™æ€é¡µé¢çš„è¿›åº¦ã€‚"},{"title":"Neoperf_study","path":"/2024/11/28/Linux kernel/Neoperf-study/","content":"NeoPerf study æœ¬æ–‡ä¸»è¦ä¸ºå­¦ä¹ è®ºæ–‡ã€ŠNeoMem: Hardware&#x2F;Software Co-Design for CXL-Native Memory Tieringã€‹çš„å·¥ä½œï¼Œåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œç”¨æˆ·æ€ã€å†…æ ¸ä»¥åŠFPGAéƒ¨åˆ†ï¼Œå†…æ ¸å¼€æºä»“åº“åœ°å€ä¸ºï¼š PKUZHOU&#x2F;linux ä»£ç åŸºäºlinuxå†…æ ¸ä»£ç 6.0å¼€å§‹ä¿®æ”¹ã€‚ ç”±äºåˆæ­¥æ¢ç´¢linuxå†…æ ¸ä»£ç ï¼Œæ‰€ä»¥æ²¡æœ‰æŒ‰ç…§è‡ªé¡¶å‘ä¸‹çš„è§†è§’åˆ†æä»£ç ï¼Œè€Œæ˜¯åŸºäºgitæäº¤è®°å½•ï¼Œå€ŸåŠ©AIä¸äº’è”ç½‘æœç´¢ï¼Œå¹³é“ºé‡åˆ°çš„ç›¸å…³çŸ¥è¯†ã€‚ç‰ˆæœ¬ä¸æ–­æ›´æ–°â€¦â€¦ a naive neoprof drivercommit ID 9bd35383 æœ¬æ¬¡ä¸»è¦åœ¨driverç›®å½•ä¸‹æäº¤äº†ä¸€ä¸ªé©±åŠ¨neoperf: ä¸»è¦æ˜¯å®ç°äº†ä¸€äº›å¯¹å¤–è®¾çš„IOæ“ä½œ Linuxå†…æ ¸é…ç½®æ–‡ä»¶KconfigKconfigæ–‡ä»¶ç”¨äºå®šä¹‰å†…æ ¸é…ç½®èœå•ï¼Œè¿™äº›èœå•å¯ä»¥åœ¨ç¼–è¯‘å†…æ ¸æ—¶å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šçš„åŠŸèƒ½ã€‚ 1234#Kconfigæ–‡ä»¶config NEOPROF#å®šä¹‰äº†ä¸€ä¸ªåä¸º`NEOPROF`çš„å†…æ ¸é…ç½®é€‰é¡¹ï¼Œå°†åœ¨å†…æ ¸é…ç½®èœå•ä¸­åˆ›å»ºé€‰é¡¹\tbool &quot;Enable Neoprofiler&quot; #boolç±»å‹ï¼Œæ˜¯å¦å¯ç”¨ default n #é»˜è®¤ä¸å¯ç”¨ åœ¨å†…æ ¸ç¼–è¯‘è¿‡ç¨‹ä¸­å¯ä»¥åœ¨Driversä¸‹æŸ¥æ‰¾åˆ° Kconfigæœ‰å…¶ç‹¬ç‰¹çš„è¯­æ³•ï¼Œä¹Ÿæ˜¯å¯ä»¥ä¸€å±‚ä¸€å±‚åŒ…è£¹ä¸‹å»ï¼šmenuã€sourceã€endmenuç­‰ç»„æˆäº†ç¼–è¯‘é€‰é¡¹é…ç½®è¿‡ç¨‹ä¸­çš„æ ‘çŠ¶èœå• Kconfigè®¾ç½®å¯¹åº”çš„ç¼–è¯‘å˜é‡åï¼ŒmakefileæŒ‡å¯¼æ„å»ºç¼–è¯‘çš„è¿‡ç¨‹ä¸­ä¼šåˆ©ç”¨è¿™äº›å˜é‡ï¼Œä»è€Œå®ç°é€‰æ‹©æ€§çš„ç¼–è¯‘ neoperf.hä¸»è¦æ–°å¢äº†å››ä¸ªæ¥å£ï¼Œå¯¹neoprofè®¾å¤‡ï¼ˆæ­¤å¤„æŒ‡Type2-CXLè®¾å¤‡ï¼‰è¿›è¡Œè®¿é—®ï¼š 1234567891011/* * The following functions are used to access the neoprof device*/u64 get_nr_hotpages(void);//è·å–å½“å‰ç³»ç»Ÿä¸­çš„çƒ­é¡µæ•°é‡u64* get_hotpages(void);//è·å–çƒ­é¡µu64 get_hotness_threshold(void);//è·å–çƒ­åº¦é˜ˆå€¼void set_hotness_threshold(u64 threshold);//è®¾ç½®çƒ­åº¦é˜ˆå€¼ neoperf.cé©±åŠ¨å¼€å‘hello worldneoperf.c ä»¥ä¸‹éƒ¨åˆ†å‚è€ƒé©±åŠ¨å¼€å‘çŸ¥è¯†ï¼šhttps://www.cnblogs.com/downey-blog/p/10500828.html 123456module_init(neoprof_init);module_exit(neoprof_exit);MODULE_LICENSE(&quot;GPL v2&quot;);MODULE_AUTHOR(&quot;PKUZHOU&quot;);MODULE_DESCRIPTION(&quot;Neoprofiler Linux driver&quot;); ioåœ°å€æ˜ å°„ç›¸å…³çŸ¥è¯†éœ€è¦ç†è§£ IOç«¯å£çš„ç¼–å€æ–¹å¼ï¼š åŒ…æ‹¬IOæŒ‡ä»¤çš„ç«¯å£æ˜ å°„æ–¹å¼ã€MMIOçš„ç»Ÿä¸€å†…å­˜æ˜ å°„æ–¹å¼ ä¸€äº›å¸¸è§çš„IOæ“ä½œå‡½æ•° 12void * ioremap(unsigned long phys_addr, unsigned long size, unsigned long flags); //memset_io\\memcpy_fromio\\readb å‚è€ƒï¼šhttps://blog.csdn.net/do2jiang/article/details/5450839 neomem migration skeletoncommit ID 26cabad18 æ–°å¢ NeoMemæ¨¡å—: migrate.cä¸»è¦æ˜¯æä¾›æ¥å£migrate_misplaced_page_no_vma è°ƒç”¨ä¸€äº›mmä¸­çš„å†…å­˜æ“ä½œå‡½æ•°ï¼Œè¿›è¡Œé¡µé¢éš”ç¦»ã€è¿ç§» neomem.h eomem.cä¸»è¦å°±æ˜¯å¯åŠ¨ neomemæ¨¡å—ï¼ˆè°ƒç”¨coreæ–‡ä»¶ä¸­å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼‰ late_initcall()åœ¨å†…æ ¸å¯åŠ¨åæœŸé€‚å½“æ—¶é—´æ‰§è¡Œï¼Œç†è§£module_initç­‰initå®çš„é¡ºåºï¼Œåœ¨include/linux/init.hä¸­ linuxè®¾å¤‡é©±åŠ¨åŠ è½½çš„å…ˆåé¡ºåº neomem_core.c å†…å­˜ä¸­çš„å„ç§åˆ†é…å‡½æ•° kthread_runå†…æ ¸çº¿ç¨‹ FPGAç«¯ä¾§æ¨¡å—ç»“æ„é¡¶å±‚æ¨¡å—ï¼š cxltyp3_memexp_ddr4_top-&gt;ed_top_wrapper_typ3 ddrå†…å­˜å‚æ•°è°ƒæ•´cxl ipè€ƒè™‘äº†ä¸åŒddrçš„ï¼ŒåŒ…æ‹¬æ˜¯å¦æ”¯æŒDBIã€å†…å­˜é€šé“æ•°é‡ç­‰ã€‚é‡‡ç”¨å®çš„æ–¹å¼åŒºåˆ†ï¼Œè®¾ç½®ä¸åŒçš„æ–¹å¼æ—¶ï¼Œéœ€è¦å¯¹ipå†…é€šè¿‡å®å®šä¹‰æ¥ç¡®å®šç›¸å…³çš„å†…å­˜å‚æ•°ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦åœ¨é¡¶å±‚æ¨¡å—å¯¹ç›¸å…³å‚æ•°è¿›è¡Œä¿®æ”¹ã€‚ .tdzhnxzibgin{zoom:50%;} .jqpdpwecqorg{zoom:50%;} .qdoolikeixpu{zoom:50%;} æˆ–è€…é€šè¿‡æ›´æ”¹ipæ–‡ä»¶ï¼Œé‡æ–°ç”Ÿæˆæ–°çš„IPæ–‡ä»¶å¤¹ .asfymrugzpwg{zoom:50%;} quartus1set_global_assignment -name OPTIMIZATION_MODE &quot;AGGRESSIVE COMPILE TIME&quot; çƒ§å½•æ¨¡å¼AS Jtag ps ä¸‰ç§çƒ§å½•æ¨¡å¼ Neomem todoä»£ç å­˜åœ¨ä¸€äº›å¯ä»¥å®Œå–„çš„åœ°æ–¹ï¼š CXLåœ°å€é‡‡ç”¨ç¡¬ç¼–ç ï¼Œå¯ä»¥å¼•å…¥è®¾å¤‡æ ‘æˆ–è€…å…¶ä»–æ£€æµ‹CXLç‰©ç†åœ°å€çš„å·¥å…·è¿›è¡Œä¼˜åŒ–ï¼Œå‚è€ƒ"},{"title":"linuxè„šæœ¬å¤‡å¿˜å½•","path":"/2024/11/26/å¤‡å¿˜å½•/linuxè„šæœ¬å¤‡å¿˜å½•/","content":"Linuxè„šæœ¬å¤‡å¿˜å½•å®‰è£…ç³»ç»Ÿåçš„ç¯å¢ƒå‡†å¤‡æ·»åŠ æ–°ç”¨æˆ· 123456adduser #å°è£…å‘½ä»¤ï¼Œå¤„ç†å®Œæ·»åŠ ç”¨æˆ·çš„å…¨éƒ¨è¿‡ç¨‹ suåˆ°æ–°ç”¨æˆ·æ˜¾ç¤ºusername@hostname~$:useradd #åº•å±‚å‘½ä»¤ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰åŠ ,suåˆ°æ–°ç”¨æˆ·æ˜¾ç¤º$:# ç”Ÿæˆ 8 ä½å¼ºå¯†ç PASSWORD=$(openssl rand -base64 6 | cut -c1-8)echo &quot;Password: $PASSWORD&quot; ç”¨æˆ·æ·»åŠ sudoç»„ 1234567usermod -aG sudo new_user#åŠ å®Œä»¥åè®°å¾—:newgrp sudo#ä½œç”¨æœ‰3ï¼š#1.åˆ‡æ¢åˆ°æŒ‡å®šçš„ç»„ä¸Šä¸‹æ–‡#2.å³æ—¶ç”Ÿæ•ˆç»„æ›´æ”¹#3.å¯åŠ¨ä¸€ä¸ªå­ shell é…ç½®sshd12345678#æœåŠ¡ç«¯å®‰è£…apt install ssh-server#é…ç½®sudo vim /etc/ssh/sshd_config#é‡å¯æœåŠ¡sudo service restart sshd VimVimé…ç½®æ¨è - ma6174 12wget 47.93.11.51:88/install_vim.shbash install_vim.sh zsh1234567891011121314#å®‰è£…zshsudo apt install zsh#ä¿®æ”¹é»˜è®¤shellä¸ºzshchsh -s /bin/zsh#å®‰è£…oh-my-zshsh -c &quot;$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;##å¦‚æœä¸æˆåŠŸï¼Œè¯·æ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤ï¼ŒæˆåŠŸäº†å°±ä¸éœ€è¦åšä¸‹é¢ä¸¤æ¡wget 47.93.11.51:88/install_zsh.shbash install_zsh.sh#å®‰è£…zsh-syntax-highlightinggit clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting å†å²è®°å½•æ¨èå‘½ä»¤æ’ä»¶12##å‘½ä»¤è‡ªåŠ¨æ¨èï¼Œæ ¹æ®å†å²è®°å½•git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions å‘½ä»¤è‡ªåŠ¨è¡¥å…¨12345##å‘½ä»¤è‡ªåŠ¨è¡¥å…¨æ’ä»¶mkdir ~/.oh-my-zsh/plugins/incrwget http://mimosa-pudica.net/src/incr-0.2.zsh -O ~/.oh-my-zsh/plugins/incr/incr.plugin.zsh##ç›®å½•è‡ªåŠ¨è·³è½¬æ’ä»¶sudo apt install autojump .zshrcé…ç½®æ–‡ä»¶é…ç½®12#æ’ä»¶æ·»åŠ zsh-syntax-highlightingplugins=(git zsh-syntax-highlighting) 123456789#è®¾ç½®ç»ˆç«¯é¢œè‰²ï¼Œæç¤ºç¬¦ï¼ŒåŠä¸Šä¸€æ¡æŒ‡ä»¤è¿”å›ç æç¤ºautoload -U colors &amp;&amp; colorsPROMPT=&quot;%&#123;$fg[red]%&#125;%n%&#123;$reset_color%&#125;@%&#123;$fg[blue]%&#125;%m %&#123;$fg[yellow]%&#125;%1~ %&#123;$reset_color%&#125;%# &quot;RPROMPT=&quot;[%&#123;$fg[yellow]%&#125;%?%&#123;$reset_color%&#125;]&quot;# Useful support for interacting with Terminal.app or other terminal programs[ -r &quot;/etc/zshrc_$TERM_PROGRAM&quot; ] &amp;&amp; . &quot;/etc/zshrc_$TERM_PROGRAM&quot;source ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions/zsh-autosuggestions.plugin.zshsource /usr/share/autojump/autojump.shsource ~/.oh-my-zsh/plugins/incr/incr*.zsh ctags12345#å®‰è£…sudo apt install ctags #å»ºç«‹ç´¢å¼•ctags -I __THROW -I __attribute_pure__ -I __nonnull -I __attribute__ --file-scope=yes --langmap=c:+.h --languages=c,c++ --links=yes --c-kinds=+p --c++-kinds=+p --fields=+iaS --extra=+q -f ~/.vim/systags /usr/include/* /usr/include/x86_64-linux-gnu/sys/* /usr/include/x86_64-linux-gnu/bits/* /usr/include/arpa/* .vimrcæ·»åŠ ç´¢å¼• 1set tags+=~/systags å®‰è£…glibc-doc ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… 1sudo apt install glibc-doc å¸¸è§è·¯å¾„hostname :/etc/hostname host: /ect/hosts tomcat1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#å®‰è£…JDK8sudo apt install default-jre -ysudo apt install openjdk-11-jre-headless -ysudo apt install openjdk-8-jre-headless -y #sudo wget https://downloads.apache.org/tomcat/tomcat-8/v8.5.65/bin/apache-tomcat-8.5.65.tar.gzsudo wget https://mirrors.bfsu.edu.cn/apache/tomcat/tomcat-8/v8.5.73/bin/apache-tomcat-8.5.73.tar.gztar zxf apache-tomcat-8.5.73.tar.gzsudo mv apache-tomcat-8.5.73 /usr/local/tomcat#å»ºç«‹è½¯è¿æ¥sudo ln -s /usr/local/tomcat/bin/* /usr/local/sbin/#å¯åŠ¨startup.sh start #ç«¯å£æ£€æŸ¥netstat -anput | grep 8080#å¯åŠ¨å‘½ä»¤startup.sh start #//å¯åŠ¨shutdown.sh #//å…³é—­catalina.sh stop #//å¯åŠ¨catalina.sh start #//å…³é—­#å…³é—­é˜²ç«å¢™sudo ufw disable #tomcat å‚æ•°é…ç½®vim /usr/local/tomcat/conf/server.xml #.......&lt;Connector port=&quot;8081&quot; protocol=&quot;HTTP/1.1&quot; #å°†ä¹‹å‰8080ç«¯å£æ”¹æˆ8081ç«¯å£connectionTimeout=&quot;20000&quot; # redirectPort=&quot;8443&quot; /&gt;#ç›®å½•ä¿® # &lt;Host name=&quot;localhost&quot; appBase=&quot;/opt/www&quot; #å°†ç½‘ç«™æ ¹ç›®å½•æ”¹åˆ°/opt/www # unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;#æ›´æ”¹ç½‘ç«™å®¶ç›®å½•ï¼Œè¿™é‡Œçš„ROOTå¿…é¡»å¤§å†™ï¼Œæ›´æ”¹å®Œæˆåéœ€è¦é‡å¯sudo mkdir /opt/www/ROOT -p mysqlmysql 8.0ä¸‹è½½ 1wget https://repo.mysql.com//mysql-apt-config_0.8.20-1_all.deb 12345678#MySQL è®¾ç½®#å¯†ç sudo mysql -uroot use mysql;update user set authentication_string=PASSWORD(&quot;è‡ªå®šä¹‰å¯†ç &quot;) where User=&quot;root&quot;;update user set plugin=&quot;mysql_native_password&quot; where User =&quot;root&quot;;flush privileges;quit; å¯¹äºLinuxå’Œwindowsä¸‹å­—ç¬¦é›†ä¸å…¼å®¹çš„æƒ…å†µï¼Œéœ€è¦æ›¿æ¢ â€¢ æŠŠæ–‡ä»¶ä¸­çš„æ‰€æœ‰çš„utf8mb4_0900_ai_ciæ›¿æ¢ä¸ºutf8_general_ciâ€¢ ä»¥åŠutf8mb4æ›¿æ¢ä¸ºutf8â€¢ å¦‚ä¸Šå›¾æ‰€ç¤ºçš„ä½ç½®ï¼Œä¸Šå›¾åªæ˜¯ä¸€éƒ¨åˆ†ï¼Œæ³¨æ„å…¨éƒ¨æ›¿æ¢ã€‚ æ•°æ®åº“å¯¼å‡º 1mysqldump -uroot -p &gt;c:ShareYunAlbumã€‚sql æ•°æ®åº“å¯¼å…¥ 12use ShareYunAlbum source ~/ShqreYunAlbum.sql å¸è½½mysql 123456sudo apt purge mysql-* -ysudo rm -rf /etc/mysql/ /var/lib/mysqlsudo apt autoremovesudo apt autorecleansudo apt-get remove mysql-common dpkg -l |grep ^rc|awk &#x27;&#123;print $2&#125;&#x27; |sudo xargs dpkg -P"},{"title":"æ§å°é¡¹ç›®ä¸iSeté¡¹ç›®å·²ä½¿ç”¨QtæŠ€èƒ½ç‚¹æ•´ç†","path":"/2024/10/15/Qt/æŠ€èƒ½ç‚¹æ•´ç†/","content":"Qtä¸QMLçŸ¥è¯†æ€»ç»“Qtä¸­çš„è®¾è®¡æ¨¡å¼ä¸­é—´æ»‘åŠ¨çš„slider 2. doubleSpinBox3. iSetæ–°å»ºé¡¹ç›®çš„ä¸¤ç§æ¨¡å¼ListWidgetã€é€‰ä¸­çŠ¶æ€è®¾ç½®ä¸ºå›¾æ ‡æ¨¡å¼4.QTreeWidget æ¡†æ¶ã€è¡¨å¤´ã€æ ·å¼è¡¨ã€ä»£ç† Qt QTreeWidgetæ ‘å½¢æ§ä»¶ç”¨æ³•è¯¦è§£_qtreewidgetç”¨æ³•_ç¿ç§‘çŸ¥è¯†äº‘çš„åšå®¢-CSDNåšå®¢ 2. Qtå¤§æ¨¡å—1. Qt DPæŒ‡é’ˆ2. è§†å›¾æ¨¡å‹æœºåˆ¶3. è§†å›¾æ¡†æ¶4. QStyle é«˜åº¦è‡ªå®šä¹‰å®ç°5. å…ƒå¯¹è±¡ä¸ä¿¡å·æ§½æœºåˆ¶6.æ„å»ºç³»ç»Ÿ7.QInvokeMethod8.å›½é™…åŒ–3. Qtç»†èŠ‚1. åŸºç¡€æ§ä»¶2. Undoæ“ä½œ3. svgæ“ä½œ4. Qtä¸åœ¨å¯¹è±¡æ ‘çš„å·¥å…·æ±‡æ€»5.Qtä¸­æœ‰æœ‰ç”¨çš„å®ï¼šQ_LIKELY 6.paintåœ¨installä¸­ç»˜åˆ¶ 4. Qté”¦ä¸Šæ·»èŠ±1. åŠ¨ç”»çŸ¥è¯†2. æ‹–æ‹½3. æ’ä»¶æœºåˆ¶4.æ¨¡å—åŒ–æ„å»º5. Qtä¸­çš„è®¾è®¡æ¨¡å¼1. å•ä¾‹æ¨¡å¼2. è´£ä»»é“¾æ¨¡å¼3. æ¥å£æ¨¡å¼4. é€‚é…å™¨æ¨¡å¼5.è§‚å¯Ÿè€…æ¨¡å¼ï¼Œ çº¿ç¨‹è§‚å¯Ÿã€æ—¶é—´å‹ç¼© 6.å…¨å±€ä¿¡å·å•ä¾‹è½¬å‘ç±» 12345678MAINOPERATIONVIEW_EXPORT bool MainOperationView_Init(IISetWidget ** ppWidget, QWidget * parent)&#123; if (ppWidget == nullptr || parent == nullptr) return false; *ppWidget = new CMainOperationView(parent); return true;&#125; 6. C++çŸ¥è¯†c++11æ–°ç‰¹æ€§ï¼Œæ‰€æœ‰çŸ¥è¯†ç‚¹éƒ½åœ¨è¿™äº†ï¼ - çŸ¥ä¹ (zhihu.com) this_thread ++ lambdaçš„å‘ 12345for(int id = enCoef9_Rr ; id &lt;= enCoef9_Bb ;id++)&#123; connect(m_spinBoxs[id],QOverload&lt;double&gt;::of(&amp;QDoubleSpinBox::valueChanged),this,[&amp;](double value)&#123; OnCoefMatrixSlot(id,value); &#125;);&#125; id æ’ç­‰äº 0 å¤šç»§æ‰¿ä¸QOBject private è™šç»§æ‰¿ 123456789101112131415161718192021class CBase&#123;private:\tvirtual void virtualPrivateFuntion()&#123; std::cout&lt;&lt;&quot;base virtualPrivateFuntion&quot;;\t&#125;&#125;ï¼›class CSub :public CBase&#123;\tprivate:\tvirtual void virtualPrivateFuntion() override&#123; std::cout&lt;&lt;&quot;sub virtualPrivateFuntion&quot;;\t&#125;&#125;int main()&#123;\tCBase* pObject = new CSub();\tpObject-&gt;virtualPrivateFuntion();&#125;//ç»“æœï¼šsub virtualPrivateFuntionï¼Œ//ç»“è®ºï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»çš„private virtualå¯ä»¥é‡å†™ å¯å˜å‚æ•°ã€å˜å‚æ¨¡æ¿ å‡½æ•°åŒ…è£…å™¨ std::shared_ptrresetã€make_shared å³å€¼å¼•ç”¨C++åå°„å…ƒç¼–ç¨‹Metaprogram is a program about a program. 7.æ‚é¡¹QStatusBaræ’ä»¶æœºåˆ¶è§£è€¦å¿«æ·é”®ISet7.0 æ¥å£è®¾è®¡ MVC8.è½®å­1.å•ä¾‹2.å·¥ä½œçº¿ç¨‹å°è£…3.stl è¿­ä»£å™¨æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼æŠ¥é”™æ•´ç†ï¼š QMenu æ²¡æœ‰æ·»åŠ Actionæ—¶ï¼Œä¸èƒ½ç›´æ¥visibleæˆ–è¿™execï¼› setGeometry: Unable to set geometry çš„ä¸€ç§è§£å†³åŠæ³•æ˜¯é‡å†™sizehintï¼Œè€Œä¸æ˜¯ä½¿ç”¨setFixedSizeï¼› å·¥å…·ä½¿ç”¨AddressSanitizerï¼ˆä¸é€‚ç”¨ä¸MinGWï¼‰[AddressSanitizer å®šä½åµŒå…¥å¼c&#x2F;c++å†…å­˜é”™è¯¯ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/436177229#:~:text=AddressSanitizer ï¼ˆåˆå ASanï¼‰æ˜¯ C%2FC%2B%2B çš„å†…å­˜é”™è¯¯æ£€æµ‹å™¨ã€‚ AddressSanitizer ç”± google,çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä» 4.8 ç‰ˆå¼€å§‹é€æ¸æˆä¸º GCC çš„ä¸€éƒ¨åˆ†ã€‚ è¿™ä¹Ÿæ„å‘³ç€å¦‚æœäº¤å‰ç¼–è¯‘å™¨ç‰ˆæœ¬ä½äº 4.8 ï¼Œæ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚) Qt æ‹¾é— 008 åœ¨ Qt ä¸­ä½¿ç”¨ Address Sanitizer - ç®€ä¹¦ (jianshu.com) åœ¨Qtä¸­ä½¿ç”¨gcc 4.8.0çš„åœ°å€æ¶ˆæ¯’å‰‚(Address Sanitizer) MTunerè½¯ä»¶ã€ç²¾é€‰ã€‘åŸºäºMTunerè½¯ä»¶è¿›è¡Œqtçš„mingwç¼–è¯‘ç¨‹åºçš„å†…å­˜æ³„æ¼æ£€æµ‹_mtuneræ€ä¹ˆä½¿ç”¨_yantuguiguziPGJçš„åšå®¢-CSDNåšå®¢"}]